{"is_source_file": true, "format": "TypeScript", "description": "This source file defines types, constants, and functions for interacting with notes in a note-taking application. It includes data types for notes, functions for CRUD operations, and logic for fallback in-memory storage if the backend is unavailable.", "external_files": ["node-fetch (indirectly via fetch API)", ".env (via process.env)"], "external_methods": ["fetch"], "published": ["backendAvailable", "listNotes", "createNote", "updateNote", "deleteNote"], "classes": [], "methods": [{"name": "export function backendAvailable(): boolean { backendAvailable", "description": "Checks if a backend API base URL is configured.", "scope": "", "scopeKind": ""}, {"name": "export async function listNotes(query?: string): Promise<Note[]> { listNotes", "description": "Retrieves the list of notes, either from backend or in-memory fallback, optionally filtered by a query string.", "scope": "", "scopeKind": ""}, {"name": "export async function createNote(data: NoteCreate): Promise<Note> { createNote", "description": "Creates a new note in the backend or in-memory store.", "scope": "", "scopeKind": ""}, {"name": "export async function updateNote(update: NoteUpdate): Promise<Note> { updateNote", "description": "Updates an existing note identified by its id, in backend or in-memory.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteNote(id: string): Promise<{ id: string }> { deleteNote", "description": "Deletes a note by id from backend or in-memory store.", "scope": "", "scopeKind": ""}, {"name": "async function http<T>(path: string, init?: RequestInit): Promise<T> { http", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function simulateLatency<T>(value: T, ms = 200): Promise<T> { simulateLatency", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "http"], "search-terms": ["Note", "api.ts", "in-memory store", "notes", "CRUD", "fetch wrapper", "simulateLatency", "NoteCreate", "NoteUpdate", "backend URL"], "state": 2, "file_id": 13, "knowledge_revision": 47, "git_revision": "", "revision_history": [{"27": ""}, {"47": ""}], "ctags": [{"_type": "tag", "name": "BASE_URL", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^const BASE_URL =$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export type NoteCreate = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export type NoteUpdate = Partial<NoteCreate> & { id: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "backendAvailable", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export function backendAvailable(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export async function createNote(data: NoteCreate): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export async function deleteNote(id: string): Promise<{ id: string }> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "http", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^async function http<T>(path: string, init?: RequestInit): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^    ...memoryStore.notes[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const idx = memoryStore.notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const idx = memoryStore.notes.findIndex((n) => n.id === update.id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const items = [...memoryStore.notes].sort($/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export async function listNotes(query?: string): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "memoryStore", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^const memoryStore: { notes: Note[] } = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "merged", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const merged = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const note: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^      const q = query ? `?query=${encodeURIComponent(query)}` : \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const q = query.toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(`${BASE_URL}${path}`, {$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "simulateLatency", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^function simulateLatency<T>(value: T, ms = 200): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^    const text = await res.text().catch(() => \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "http", "scopeKind": "function"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^export async function updateNote(update: NoteUpdate): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46480-46518/notes_app_frontend/src/lib/api.ts", "pattern": "/^    updatedAt: new Date().toISOString(),$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}], "hash": "8ad0f50f93a2723ff09329c70e7dd226", "format-version": 4, "code-base-name": "notes_app_frontend", "filename": "notes_app_frontend/src/lib/api.ts"}